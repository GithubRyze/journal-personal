---
title: 极高点工作总结
author: 刘Sir
date: 2024-08-01 10:10:00 +0800
categories: [生活]
tags: [随记]
render_with_liquid: false
---  

距离被裁的时间点，已过去一个多月了。在这家公司工作了大约 6 年多，现如今我的小孩都已经上 4 年级，不得不感慨一句岁月如梭。

最近一段时间一直想仔细回顾下这 6 年工作，整体来说我个人感觉这 6 年的时间是我成长最大的一个时间段，因此我还是非常感激公司这 6 年来对我的包容，培养。这里有一起待了 6 年的同事，他们都非常的好，大家相处的也非常的愉快。聚散有时，人有情。

大约是 2019年6月入职的 （燕娥，刘凯，小球就三人），依稀记得刚进公司的时间点，前端还是 2 个页面，后端几乎没有，并且还没有部署到环境上和其他团队进行调试。我开始上作为系统分析师的岗位进来的，刚进公司没几天就被派去杭州出差，那时候我挺开心的，因为之前总是想体验下出差工作，并且还是坐飞机，以及让我感觉到一种被重视的体验，因此总体来说我是比较开心和兴奋的。后面出差（和Alex 一个会打架子鼓的程序员）到杭州过程中，并不是很顺利，主要是刚进去对公司的业务和团队人员都不熟悉，整体上稀里糊涂的，出差几天都没有搞清楚做什么，要做什么，怎么下手，然后就回深圳了。后面一段时间内，我们一起去出差香港公司，一路都是那么的好奇而又忐忑。大致记得在香港的公司有 2 个美女同事（agatha，queuena）和我讲了些业务上内容，讲完后内心还是迷茫的，没有搞清楚。现在想来是我那时候太年轻了，工作经历和各方面的能力都缺少导致的。再后来一段时间深圳团队，BA 团队，杭州团队之间出现了矛盾，大约是 BA 团队在杭州团队说深圳团队的不是，深圳团队认为是杭州团队导致的。因为那时候我刚去不久，也不太清楚这里面的是非曲直，最后因为这个事情 Alex 离职了。然后开始让我慢慢的管理团队和对外沟通，那时候我也只是技术上又点优势，其他都缺少经验。在熟悉后，我发现深圳团队一直上独自在开发，没有和其他团队进行调试，甚至部署环境和方式都没有搞清楚。因此第一件事情就是和同事们一起把前后端部署到对应的环境中和其他团队进行互动。后面就说一些按部就班的沟通，开发，部署，测试了。另外这一年为了追赶项目进度，我们出差 1 一个多月，在后面的我看这个项目组都很不成熟，都是临时搭建起来的。所谓的上市公司我们也不要过于迷信这些头衔，代码都写得差不多，构架做得也就那么一回事。

2020 年，疫情（新冠）的元年，封城，封村，隔离，怎么一个乱字了得。这一年我外婆去世了。工作就这样继续着
2021 年，一个重要的节点。如今我忘记具体是什么原因了，只大约记得我在一次很多人的会议上抱怨工作量的问题，我说：我一个人顶杭州产品，开发，设计三个人的活，我其实不想和 BA 做沟通的活，只想做功能。后面老板找我谈话，让杭州同事接手工作，我们开始做另外的东西。现在想来真是太年轻，太冲动，太不懂事了。
2022 - 2025 年，都是在做一个平台的工作，公司希望能把这个做成一个产品，但是我心里很清楚我们这个产品很难盈利，且不说我的直属领导后面不太关心这个产品了，另外在我看来我的领导其实也有自己的小心思的。在后来的时间里，应该是 2023 年8月，领导让我周末加班开发报表，但那个周末我已经打算和家人去惠州玩了，因此在会议上说没空，可能老板觉得我在会议上拒绝他了，外加其他事情，让他开始对我有些不满， 在 2024 年初，我年红（一个月）一个子都没有，另外也开始找我事，当时我也开始在打算找工作了，也简单的找了下。但是心里还是舍不得这家，主要是这家公司有以下几个非常好的优势：
- 离家近
- 工作时间固定，并且相对自由
- 薪资也很不错

在 2025 年初的时候，我已经预计大概率会裁员，主要是老板在杭州重新收购一个开发团队，所以业务都在杭州那边进行了，深圳这边没有营收的业务。

在这 6 年多时间里面，我也从一个可以说是小伙，逐渐成为了父亲，成熟了些，同样也对整个社会有了进一步的了解，因此我要感谢 6 年来遇到的同事们，他们教会了我很多东西，也让我明白了很多道理。
- 谢媛球：广西人，深圳第一个员工，我面试的是就只看到他
- 彭姐： 一个知心，友爱的大姐，
- 刘凯：一个回家继承父业的人，如今 2 娃在手
- 刘燕娥： 文静，听话的前端女生
- 肖宇军：老乡，认识他姐夫，看他恋爱，结婚，当爸爸。
- 杨少文：江西老表，测试，前同事，我叫他到这家公司发展的，也是看他恋爱，失恋，再恋，结婚，生娃
- 陈伟平： 前端，刘凯离职后来的公司，后面在福建远程工作
- 朱忍辉：路子野，去广州搞 A 货球衣了，后面留广州去发财了
- 刘付敏：UI, 直爽
- 许铭宏：测试，东北老哥，挺潇洒
- royce：后面的领导，很友好，教会了团队沟通上的一些东西
- agatha/queuena：都是很友好 BA, 后面听说他们去甲方了
至此在这家公司相处的比较多的同事就说这些了，希望他们都好好的。


## 技术方面
- 学会 golang，并且有长达 2 年多的使用经验
- 学会并且熟练使用 docker k8s 等工具
- linux 上的一些知识，比如：常用的命令，snap 等
- 架构设计，微服务，运维，部署等都有较为丰富的经验

## 微服务
- 并不是所有应用都需要微服务架构：微服务的治理，运维都需要很大的成本
- 微服务的划分方式可以有很多种： 其中领域的概念是 ddd 中提到的，对整个领域的理解 - 问题（应用和开发具体解决的问题）
  - 按功能划分
  - 按领域划分
  - 按发布的频率划分 
- 大部分应用都不需要微服务架构，通过项目组织和规划单体应用来解决，可以很多人力和物力
- 微服务架构，也和现实中现代的化的工厂流水线有些相同，每个人负责各自服务，然后组合成一应用
- 微服务架构，需要充分考虑公司的成员组成和具体的业务场景
- 微服务治理困难，日志，指标，调用链路长，多实例，数据一致性等问题，都需要有很好的治理方式和手段

## 团队
- 主动团结，关心和帮助团队成员
- 避免情绪化沟通
- 对团队中的成员，不能过于苛刻
- 对外沟通，要注意用词，语气，统一，尽量避免产生误会 
- 对外提供信息和接口不能有错误
- 团队成员是之间友好竞争关系 
- 主要业务要竟可能把握在手里
- 可以主动的向上要资源（
- 主动向上汇报工作，听取工作指导
- 技术方案要评审，尽可能有 B 方案
- 接口和表的数据结构要评审 
- 文档编写和维护也重要
- 团队管理重要的是权和钱

## 架构
在架构的设计中，必须要需要关注一下几个方面：
- 服务的 读/写 特点 （读多写少，或者是写多读少），读的具体特点也不一样，全文检索和查redis，db 也有不同处理区别
- 读写的数据量的大小也很重要
- 数据存储的查询和写入效率
- 数据一致性 （强 弱）
- 应用的整体架构是采用 微服务/单体/soap 
- 服务是否需要高可用
- 服务的 配置/发现，负载均衡，限流，熔断等


### 架构设计样例
设计一个微博消息系统。

按照上面分析过程，首先分析此系统的读写特点。
1. 单个微博消息只会写入一次 （假设不修改的情况）
2. 单个微博消息会被多次查看（无论是单个人查看多次，还是多个人查看多次）
通过上面分析此类系统有个很明显的特点，就是 写少读多。 在这个模式中可以使用内存和磁盘存储一起，我们可以先使用把消息写入磁盘，然后再把消息同步到内存数据库（这里可以使用 mq，redis），三张表：
用户
```
post_id, 
userid, 
post，
time 
```
关注
```
userid, follow_id (关联userid)
```
写的场景：web -> backend -> db -> mq -> redis

读的场景：web -> backend -> redis -> db， 这里其实理解做了 2 层的缓存，先读 redis，没有的情况下再读 db，

写的场景比较好处理，读的场景需要考虑请求量的问题，假设一个明星有 1 一个亿的粉丝，然后这个明星发了一个条消息，同时可能会出现大量的读取请求。在这个情况下存在请求把 redis 打垮，甚至威胁后面的 db，这种场景就是 雪崩效应。这种场景我想到是可以这样取优化：
- 增加熔断策略 - 防雪崩
- 限流 - 防雪崩
- 分库 （把粉丝的数据大于多少数量划分到另外的redis 缓存的集群中）
- backend 也可以增加缓存策略 （按照消息查询频率，缓存消息 比如 top 1000 这样）

通过以上优化手段基本可以满足大部分场景，更深入的考虑点有：
- 消息的大小
- 网络的传输速率
- 缓存的命中
